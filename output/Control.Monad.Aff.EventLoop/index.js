// Generated by purs version 0.11.5
"use strict";
var Control_Applicative = require("../Control.Applicative");
var Control_Bind = require("../Control.Bind");
var Control_Monad_Aff = require("../Control.Monad.Aff");
var Control_Monad_Aff_AVar = require("../Control.Monad.Aff.AVar");
var Control_Monad_Aff_Class = require("../Control.Monad.Aff.Class");
var Control_Monad_Rec_Class = require("../Control.Monad.Rec.Class");
var Data_Functor = require("../Data.Functor");
var Data_Maybe = require("../Data.Maybe");
var Data_Unit = require("../Data.Unit");
var Prelude = require("../Prelude");
var Breaker = function (x) {
    return x;
};
var make$prime = function (dictMonadAff) {
    return function (dictMonadRec) {
        return function (go) {
            var loop = function (breaker) {
                return function (v) {
                    return Control_Bind.bind((dictMonadRec.Monad0()).Bind1())(Control_Monad_Aff_Class.liftAff(dictMonadAff)(Control_Monad_Aff_AVar.takeVar(breaker)))(function (v1) {
                        return Control_Bind.discard(Control_Bind.discardUnit)((dictMonadRec.Monad0()).Bind1())(Control_Monad_Aff_Class.liftAff(dictMonadAff)(Control_Monad_Aff_AVar.putVar(breaker)(Data_Maybe.Nothing.value)))(function () {
                            if (v1 instanceof Data_Maybe.Nothing) {
                                return Data_Functor.map((((dictMonadRec.Monad0()).Bind1()).Apply0()).Functor0())(Data_Maybe.maybe(new Control_Monad_Rec_Class.Loop(Data_Unit.unit))(Control_Monad_Rec_Class.Done.create))(go);
                            };
                            if (v1 instanceof Data_Maybe.Just) {
                                return Control_Applicative.pure((dictMonadRec.Monad0()).Applicative0())(new Control_Monad_Rec_Class.Done(v1.value0));
                            };
                            throw new Error("Failed pattern match at Control.Monad.Aff.EventLoop line 58, column 5 - line 60, column 29: " + [ v1.constructor.name ]);
                        });
                    });
                };
            };
            return Control_Monad_Aff_Class.liftAff(dictMonadAff)(Control_Bind.bind(Control_Monad_Aff.bindAff)(Control_Monad_Aff_AVar["makeVar'"](Data_Maybe.Nothing.value))(function (v) {
                return Control_Applicative.pure(Control_Monad_Aff.applicativeAff)({
                    breaker: function (a) {
                        return Control_Monad_Aff_AVar.putVar(v)(new Data_Maybe.Just(a));
                    }, 
                    run: Control_Monad_Rec_Class.tailRecM(dictMonadRec)(loop(v))(Data_Unit.unit)
                });
            }));
        };
    };
};
var make = function (go) {
    var loop = function (breaker) {
        return function (v) {
            return Control_Bind.bind(Control_Monad_Aff.bindAff)(Control_Monad_Aff_AVar.takeVar(breaker))(function (v1) {
                return Control_Bind.discard(Control_Bind.discardUnit)(Control_Monad_Aff.bindAff)(Control_Monad_Aff_AVar.putVar(breaker)(Data_Maybe.Nothing.value))(function () {
                    if (v1 instanceof Data_Maybe.Nothing) {
                        return Data_Functor.map(Control_Monad_Aff.functorAff)(Data_Maybe.maybe(new Control_Monad_Rec_Class.Loop(Data_Unit.unit))(Control_Monad_Rec_Class.Done.create))(go);
                    };
                    if (v1 instanceof Data_Maybe.Just) {
                        return Control_Applicative.pure(Control_Monad_Aff.applicativeAff)(new Control_Monad_Rec_Class.Done(v1.value0));
                    };
                    throw new Error("Failed pattern match at Control.Monad.Aff.EventLoop line 36, column 5 - line 38, column 29: " + [ v1.constructor.name ]);
                });
            });
        };
    };
    return Control_Bind.bind(Control_Monad_Aff.bindAff)(Control_Monad_Aff_AVar["makeVar'"](Data_Maybe.Nothing.value))(function (v) {
        return Control_Applicative.pure(Control_Monad_Aff.applicativeAff)({
            breaker: function (a) {
                return Control_Monad_Aff_AVar.putVar(v)(new Data_Maybe.Just(a));
            }, 
            run: Control_Monad_Rec_Class.tailRecM(Control_Monad_Aff.monadRecAff)(loop(v))(Data_Unit.unit)
        });
    });
};
var forever$prime = function (dictMonadAff) {
    return function (dictMonadRec) {
        return function (go) {
            return make$prime(dictMonadAff)(dictMonadRec)(Data_Functor.voidLeft((((dictMonadRec.Monad0()).Bind1()).Apply0()).Functor0())(go)(Data_Maybe.Nothing.value));
        };
    };
};
var forever = function (go) {
    return make(Data_Functor.voidLeft(Control_Monad_Aff.functorAff)(go)(Data_Maybe.Nothing.value));
};
var break$prime = function (v) {
    return v(Data_Unit.unit);
};
var $$break = function (v) {
    return v;
};
module.exports = {
    "break": $$break, 
    "break'": break$prime, 
    forever: forever, 
    "forever'": forever$prime, 
    make: make, 
    "make'": make$prime
};
